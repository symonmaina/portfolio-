{% extends "base.html" %}
{% block title %}{{ legend }}{% endblock %}
{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card bg-dark text-white">
                <div class="card-header">
                    <h3>{{ legend }}</h3>
                </div>
                <div class="card-body">
                    <form method="POST" enctype="multipart/form-data">
                        {% if item_type == 'project' %}
                        <div class="mb-3">
                            <label for="title" class="form-label">Title</label>
                            <input type="text" class="form-control" id="title" name="title"
                                value="{{ item.title if item else '' }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="link" class="form-label">Project Link</label>
                            <input type="text" class="form-control" id="link" name="link"
                                value="{{ item.link if item else '' }}">
                        </div>
                        {% elif item_type == 'education' %}
                        <div class="mb-3">
                            <label for="degree" class="form-label">Degree</label>
                            <input type="text" class="form-control" id="degree" name="degree"
                                value="{{ item.degree if item else '' }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="institution" class="form-label">Institution</label>
                            <input type="text" class="form-control" id="institution" name="institution"
                                value="{{ item.institution if item else '' }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="year" class="form-label">Year</label>
                            <input type="text" class="form-control" id="year" name="year"
                                value="{{ item.year if item else '' }}" required>
                        </div>
                        {% elif item_type == 'profile' %}
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" name="name"
                                value="{{ item.name if item else '' }}" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Phone</label>
                            <input type="text" class="form-control" id="phone" name="phone"
                                value="{{ item.phone if item else '' }}">
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email" name="email"
                                value="{{ item.email if item else '' }}">
                        </div>
                        <div class="mb-3">
                            <label for="residence" class="form-label">Residence</label>
                            <input type="text" class="form-control" id="residence" name="residence"
                                value="{{ item.residence if item else '' }}">
                        </div>
                        <div class="mb-3">
                            <label for="bio" class="form-label">Bio</label>
                            <textarea class="form-control" id="bio" name="bio" rows="5"
                                required>{{ item.bio if item else '' }}</textarea>
                        </div>
                        {% else %}
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" name="name"
                                value="{{ item.name if item else '' }}" required>
                        </div>
                        {% endif %}

                        {% if item_type != 'profile' and item_type != 'education' %}
                        <div class="mb-3">
                            <label for="description" class="form-label">Description</label>
                            <textarea class="form-control" id="description" name="description" rows="3"
                                required>{{ item.description if item else '' }}</textarea>
                        </div>
                        {% endif %}

                        {% if item_type == 'education' %}
                        <div class="mb-3">
                            <label for="description" class="form-label">Description (Optional)</label>
                            <textarea class="form-control" id="description" name="description"
                                rows="3">{{ item.description if item else '' }}</textarea>
                        </div>
                        {% endif %}

                        {% if item_type != 'education' %}
                        <div class="mb-3">
                            <label for="image_file" class="form-label">Image File</label>
                            {% if item and item.image_file %}
                            <div class="mb-2">
                                <img src="{{ url_for('static', filename='images/' + item.image_file) }}"
                                    alt="Current Image" style="max-height: 100px;">
                                <small class="text-muted ms-2">Current: {{ item.image_file }}</small>
                            </div>
                            {% endif %}
                            <input type="file" class="form-control" id="image_file" name="image_file">
                        </div>
                        {% endif %}

                        <button type="submit" class="btn btn-primary">Save</button>
                        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">Cancel</a>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}